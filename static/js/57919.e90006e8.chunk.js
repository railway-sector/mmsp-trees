"use strict";(self.webpackChunkmmsp_trees=self.webpackChunkmmsp_trees||[]).push([[57919],{27631:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(50076);class r extends s.A{constructor(e,t,n){super(e,t,n),this.name="unknown",this.name=e}}},45564:(e,t,n)=>{n.d(t,{Fc:()=>a,WG:()=>l,zj:()=>r});n(54901);let s={noDataValue:-5e5,defaultQueryOptions:()=>({noDataValue:s.noDataValue,demResolution:"auto",maximumAutoTileRequests:150,ignoreInvisibleLayers:!0,signal:null}),updateThrottleMillis:100,delayAfterPreviewMillis:500,defaultDemResolution:(0,n(31633).oU)(10,"centimeters","meters"),densificationMaxSamples:3e3,largeChartSamples:1e4,maxTotalSamples:1e5,maxChartRatio:300,minSlopeSampleDistance:10,formatPrecision:1,profileLinesUpdateThrottleMillis:100,hoveredPointsStyle:{size:14,borderStyle:"solid",borderWidth:3,borderColor:"#ffffff",boxShadow:"0px 0px 0px 5px rgba(255,255,255,0.2)"}};function r(){return s}const l={progress:1,hasZ:!1,samples:[],statistics:null,spatialReference:null},a=" \u2015 "},47453:(e,t,n)=>{n.d(t,{Bk:()=>o,ON:()=>l,Zz:()=>r,oU:()=>a});var s=n(27631);class r extends s.A{constructor(){super("too-complex","The input geometry has too many points.")}}class l extends s.A{constructor(){super("invalid-geometry","The input geometry is invalid.")}}class a extends s.A{constructor(){super("elevation-query-error","Error querying elevation from provider.")}}class o extends s.A{constructor(){super("unknown","Unknown error.")}}},55964:(e,t,n)=>{n.d(t,{Ai:()=>d,Rg:()=>R,VJ:()=>D,_W:()=>S,lM:()=>x,yK:()=>w});var s=n(15941),r=n(50346),l=n(31633),a=n(19555),o=n(20664),i=n(23701),u=n(56611),c=n(13312),f=n(7137),p=n(12482),h=n(47453);async function d(e,t,s,a,o,i,p){let d,g,y;const w=e.spatialReference,x=w.isGeographic||w.isWebMercator;let R=0;if(!x){const{execute:t}=await n.e(89227).then(n.bind(n,89227));(0,r.Te)(p),R=t(e,{unit:"meters"}),(0,r.Te)(p)}const Z=1/(0,l.GA)(a);if(x){await(0,u.initializeProjection)([{source:w,dest:a},{source:w,dest:c.A.WGS84}],p);const n=function(e){return(0,f.TT)(e.spatialReference)?e:(0,u.project)(e,c.A.WGS84)}(e);d=(0,f.l1)([n],"meters")[0];const r=m(d,o);if(z(e,d,r)>i)throw new h.Zz;const l=v(n,t,s);({densifiedPath:g,distances:y}=function(e,t,n){const{hasZ:s}=e;return E(e,t,n,P,s?M:_)}(l,r,Z)),g=(0,u.project)(g,a)}else{await(0,u.initializeProjection)([{source:w,dest:a}],p),d=R;const n=m(d,o);if(z(e,d,n)>i)throw new h.Zz;const l=v(e,t,s);({densifiedPath:g,distances:y}=function(e,t,n){const{hasZ:s}=e;return E(e,t,n,A,s?b:T)}(l,n,Z)),(0,r.Te)(p),g=(0,u.project)(g,a)}return{densifiedPath:g,pathLength:d*Z,distances:y}}function m(e,t){const n=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,n)}function v(e,t,n){if(null==t)return g(e);const s=e.spatialReference,r=t.mode,l=(0,p.Ze)(t,s);let a=null;switch(n.type){case"2d":a=function(e,t,n){let{hasZ:s}=e;return"absolute-height"===t?s?e=>{let[t,s,r]=e;return[t,s,r+n]}:e=>{let[t,s]=e;return[t,s,n]}:null}(e,r,l);break;case"3d":a=function(e,t,n,s){let{spatialReference:r,hasZ:l}=e,{elevationProvider:a}=s;const o=(e,t,n,s)=>a?.getElevation(e,t,n,r,s)??0;switch(t){case"on-the-ground":return e=>{let[t,n]=e;return[t,n,o(t,n,0,"ground")]};case"absolute-height":return l?e=>{let[t,s,r]=e;return[t,s,r+n]}:e=>{let[t,s]=e;return[t,s,n]};case"relative-to-ground":return l?e=>{let[t,s,r]=e;return[t,s,r+o(t,s,r,"ground")+n]}:e=>{let[t,s]=e;return[t,s,o(t,s,0,"ground")+n]};case"relative-to-scene":return l?e=>{let[t,s,r]=e;return[t,s,r+o(t,s,r,"scene")+n]}:e=>{let[t,s]=e;return[t,s,o(t,s,0,"scene")+n]};default:return null}}(e,r,l,n)}return null==a?g(e):new i.A({hasZ:!0,hasM:!1,spatialReference:s,paths:y(e.paths,a)})}function g(e){return e.hasZ?new i.A({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:y(e.paths,e=>{let[t,n]=e;return[t,n]})}):e}function y(e,t){const n=e.length,s=new Array(n);for(let r=0;r<n;++r){const n=e[r],l=n.length,a=new Array(n.length);s[r]=a;for(let e=0;e<l;++e)a[e]=t(n[e])}return s}function w(e){return R(e)&&e.paths.some(e=>e.length>1)}function x(e){return function(e){return Z(e)&&R(e?.geometry)}(e)&&w(e.geometry)}function R(e){return!Z(e)&&null!=e&&"polyline"===e.type}function Z(e){return null!=e&&"geometry"in e}function S(e){const t=e?.layer;return null!=t&&"graphics"===t.type&&t.internal}function E(e,t,n,r,a){const{spatialReference:o,hasZ:u}=e,c={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:o,metersPerSR:(0,l.GA)(o)},f=[],p=[];let h=0;for(let l=0;l<e.paths.length;++l){const o=e.paths[l],i=new Array,u=new Array;let d=0;for(let e=1;e<o.length;++e){const l=o[e-1],f=o[e],p=r(c,l,f);let m;for(m=d;m<p.distance&&!(0,s.Io)(m,p.distance);m+=t)i.push(a(p,m)),u.push((h+m)*n);d=m-p.distance,h+=p.distance,i.push(f),u.push(h*n)}f[l]=i,p[l]=u}return{densifiedPath:new i.A({spatialReference:o,hasZ:u,paths:f}),distances:p}}function P(e,t,n){return e.distance=0,(0,f._3)(e,t,n,e.spatialReference),e.from=t,e.to=n,e}function A(e,t,n){return e.from=t,e.to=n,e.distance=(0,a.Io)(n,t)*e.metersPerSR,e}function _(e,t){let{from:n,azimuth:s,spatialReference:r}=e;return(0,f.vN)([0,0],n,s,t,r)}function M(e,t){let{from:n,to:r,azimuth:l,distance:a,spatialReference:o}=e;const i=t/a,u=[0,0,(0,s.Cc)(n[2],r[2],i)];return(0,f.vN)(u,n,l,t,o),u}function T(e,t){let{from:n,to:s,distance:r}=e;return(0,a.Cc)([0,0],n,s,t/r)}function b(e,t){let{from:n,to:s,distance:r}=e;return(0,o.l)([0,0,0],n,s,t/r)}function D(e){return e.paths.reduce((e,t)=>e+t.length,0)}function z(e,t,n){return D(e)+Math.floor(t/n)+Math.max(0,e.paths.reduce(e=>1+e,0)-1)}},57919:(e,t,n)=>{n.d(t,{qX:()=>A,LD:()=>x,uK:()=>g,xi:()=>_});var s=n(18690),r=n(15941),l=n(50346),a=n(66388),o=n(5262),i=n(80963),u=n(45564),c=n(47453),f=n(55964),p=n(80397);function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e>=t)return n;if(n.push(e),t-e<2)return n;const s=t-1;n.push(s);const r=d(e+1,s);for(;;){const e=r.next();if(e.done)break;n.push(e.value)}return n}function*d(e,t){if(e>=t)return;const n=e+Math.floor((t-e)/2);yield n;const s=d(e,n),r=d(n+1,t);for(;;){const e=s.next(),t=r.next();if(e.done&&t.done)break;e.done||(yield e.value),t.done||(yield t.value)}}var m=n(27243),v=n(59752);async function*g(e,t){const{view:n,geometry:s,elevationInfo:r,providers:a,options:o}=e,i=n.spatialReference;if(!i||null==s||!(0,f.yK)(s))throw new c.ON;const p=a.length;if(0===p)return null;const h=Math.round(o.maxTotalSamples/p);if((0,f.VJ)(s)>h)throw new c.Zz;const d=await(0,f.Ai)(s,r,n,i,o,h,t);(0,l.Te)(t);let m=0;const v=new Array(p),g=new Array(p);for(let l=0;l<p;l++){const n=Z(d);v[l]=n,m+=n.samples.length;const s={...e,provider:a[l],result:n,densificationResult:d};g[l]=y(s,t)[Symbol.iterator]()}if(m>o.maxTotalSamples)throw new c.Zz;const w=await Promise.all(g.map(e=>{const t=e.next();return!0===t.done?Promise.resolve(null):t.value}));(0,l.Te)(t);for(let l=0;l<p;l++)v[l]=w[l];yield v,await(0,l.Pl)(e.delayAfterPreview??(0,u.zj)().delayAfterPreviewMillis,null,t.signal),(0,l.Te)(t);const x=[];try{let e;do{e=!1;for(let t=0;t<p;t++){const n=g[t].next();!1===n.done&&(x.push({resultPromise:n.value,index:t}),e=!0)}}while(e)}finally{g.forEach(e=>e.return?.())}for(const{resultPromise:u,index:c}of x)v[c]=await u,(0,l.Te)(t),yield v;for(const l of v)null!=l&&(l.progress=1);yield v}function*y(e,t){const{densificationResult:n}=e,r={...e,abortOptions:t,densificationResult:n},l=h(0,r.result.samples.length),a=l.slice(0,r.provider.numSamplesForPreview);yield w(r,a,!0);const o=(0,s.Ho)(l,r.provider.numSamplesPerChunk);for(const s of o)yield w(r,s,!1)}async function w(e,t,n){let{densificationResult:s,result:r,provider:o,queue:i,abortOptions:c,cache:f}=e;const{densifiedPath:p,pathLength:h}=s,d=r.spatialReference,{samples:m}=r,v=[];for(let l=0;l<t.length;l++){const e=m[t[l]];v[l]=[...e.coordinate]}try{return await i.push({geometry:new a.A({spatialReference:d,points:v,hasZ:p.hasZ}),provider:o,indices:t,preview:n,result:r,parameters:{...(0,u.zj)().defaultQueryOptions(),minDemResolution:n?Math.round(h/o.numSamplesForPreview):Math.round(h/m.length),cache:f}},c),{...r}}catch(g){return(0,l.zf)(g)?null:u.WG}}function x(e){return new m.F({priority:v.W6.ELEVATION_PROFILE,concurrency:1,scheduler:e,process:async e=>{(0,l.Te)(e.parameters);try{await async function(e){let{geometry:t,provider:n,indices:s,preview:r,result:l,parameters:a}=e;if(0===s.length)return;const o=(await async function(e,t,n){try{return await e.queryElevation(t,n)}catch(r){throw new c.oU}}(n,t,a)).geometry,{hasZ:i,points:u}=o,f=a.noDataValue,{samples:h}=l;for(let c=0;c<s.length;c++){const e=h[s[c]];if(e.isHole)continue;const t=i?u[c][2]:null;null===t||t===f?e.sampledZ=null:(l.hasZ=!0,e.sampledZ=t),e.sampled=!0}(function(e){const t=e.length-1;let n=0;for(let s=1;s<=t;s++)(e[s].sampled||s===t)&&(R(e,n,s),n=s)})(h),l.progress=r?0:l.progress+s.length/h.length,l.statistics=(0,p.mW)(l.samples,l.spatialReference)}(e)}catch(t){(0,l.jH)(t)}}})}function R(e,t,n){if(n-t===1)return;const s=e[t],l=s.sampledZ,a=e[n],o=a.sampledZ;if(null==l||null==o){for(let s=t+1;s<n;s++)e[s].sampledZ=null;return}const i=s.distance,u=a.distance-i;for(let c=t+1;c<n;c++){const t=e[c],n=(t.distance-i)/u;t.sampledZ=(0,r.Cc)(l,o,n)}}function Z(e){let{densifiedPath:t,distances:n}=e;const s=t.spatialReference,r=(0,i.Vp)(s),l=t.paths,a=l.length,u=[];let c=null,f=0;for(let i=0;i<a;i++){const e=l[i],t=e.length,s=n[i];for(let n=0;n<t;n++){const t=e[n],l=s[n];r&&(t[0]=(0,o.N6)(t[0],r.valid[0],r.valid[1])),c&&0===n&&S(u,c,t,f,l),u.push(E(t,l)),c=t,f=l}}return{progress:0,samples:u,hasZ:!1,statistics:null,spatialReference:s}}function S(e,t,n,s,r){e.push(P(t,s)),e.push(P(n,r))}function E(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!1,isHole:!1}}function P(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!0,isHole:!0}}function A(e,t,n){if(!e||0===e.length)return;const s=e.length-1,r=e[0];if(t<=n(r))return r;const l=e[s];if(t>=n(l))return l;let a=0,o=0,i=s;for(;a<i;){o=a+Math.floor((i-a)/2);const r=e[o],l=n(r);if(l===t)return r;if(t<l){if(o>0){const s=e[o-1],a=n(s);if(t>a)return t-a>=l-t?r:s}i=o}else{if(o<s){const s=e[o+1],a=n(s);if(t<a)return t-l>=a-t?s:r}a=o+1}}return e[o]}function _(e){return e>.999999?1:e}},80397:(e,t,n)=>{n.d(t,{DM:()=>i,ch:()=>o,mW:()=>a});var s=n(18690),r=n(31633),l=n(45564);function a(e,t){const n=e.length;if(0===n)return null;const s=e[0],a=s.sampledZ;let o=a,i=a,f=0,h=0,d=null,m=null,v=null!=a?a:0,g=0,y=0,w=null!=a?1:0,x=0,R=0;const Z=(0,r.GA)(t),S=(0,r.G9)(t),E=(0,l.zj)().minSlopeSampleDistance/Z,P=2*E,A=new p,_=new p,M=()=>{b(),A.copy(_),_.reset()},T=(e,t)=>{M(),e>0&&e-A.start<=P&&(e=A.start+E),_.restart(e,t)},b=()=>{if(A.isHole||_.isHole)return;const e=_.avgElevation-A.avgElevation,t=_.start-A.start,n=e*S,s=t*Z,l=(0,r.oU)(Math.atan2(n,s),"radians","degrees");l>0?(g+=l,d=c(d,l),x++):l<0&&(y-=l,m=c(m,-l),R++)};null!=s.sampledZ&&T(s.distance,s.sampledZ);for(let r=1;r<n;++r){const t=e[r-1],n=e[r],s=n.sampledZ;if(null==s){_.isHole||M();continue}w++,v+=s,o=u(o,s),i=c(i,s),_.isHole||n.distance-_.start>=E?T(n.distance,s):_.insert(s);const l=t.sampledZ;if(null!=l){const e=s-l;e>0?f+=e:e<0&&(h-=e)}}return M(),0===w?null:{maxDistance:e[n-1].distance,minElevation:o,maxElevation:i,avgElevation:0===w?null:v/w,elevationGain:f,elevationLoss:h,maxPositiveSlope:d,maxNegativeSlope:m,avgPositiveSlope:0===x?null:g/x,avgNegativeSlope:0===R?null:y/R}}function o(e){const t=e.filter(s.Ru),n=t.length;if(0===n)return null;const r=t[0];if(1===n)return r;let l=r.maxDistance,a=r.minElevation,o=r.maxElevation,i=r.maxPositiveSlope,f=r.maxNegativeSlope;for(let s=1;s<t.length;++s){const e=t[s];l=c(l,e.maxDistance),a=u(a,e.minElevation),o=c(o,e.maxElevation),i=c(i,e.maxPositiveSlope),f=c(f,e.maxNegativeSlope)}return{maxDistance:l,minElevation:a,maxElevation:o,avgElevation:null,elevationGain:null,elevationLoss:null,maxPositiveSlope:i,maxNegativeSlope:f,avgPositiveSlope:null,avgNegativeSlope:null}}function i(e){let t=null,n=null,s=null;for(const l of e){if(null==l)continue;const{statistics:e,spatialReference:a}=l;if(null==e)continue;const o=(0,r.GA)(a);t=c(t,f(e.maxDistance,o));const i=(0,r.G9)(a);s=u(s,f(e.minElevation,i)),n=c(n,f(e.maxElevation,i))}return{minDistance:0,maxDistance:t??0,minElevation:s??0,maxElevation:n??0}}function u(e,t){return null==t?e:null!=e?Math.min(e,t):t}function c(e,t){return null==t?e:null!=e?Math.max(e,t):t}function f(e,t){return null!=e&&null!=t?e*t:null}class p{constructor(){this._start=0,this._totalElevation=0,this._sampleCount=0}get avgElevation(){return this._totalElevation/this._sampleCount}get isHole(){return 0===this._sampleCount}get start(){return this._start}copy(e){this._start=e._start,this._sampleCount=e._sampleCount,this._totalElevation=e._totalElevation}reset(){this._start=0,this._sampleCount=0,this._totalElevation=0}restart(e,t){this._start=e,this._sampleCount=1,this._totalElevation=t}insert(e){++this._sampleCount,this._totalElevation+=e}}}}]);
//# sourceMappingURL=57919.e90006e8.chunk.js.map